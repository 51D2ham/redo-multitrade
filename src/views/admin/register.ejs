<%- include('../partials/header.ejs', { title: 'Admin Register' }) %>

<!-- Hero Background -->
<div class="min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-8">
  <main class="container mx-auto max-w-5xl px-4">
    
    <!-- Navigation Breadcrumb - Outside the card -->
    <nav class="flex items-center gap-2 mb-8 p-4 bg-white/60 backdrop-blur-sm rounded-xl border border-white/30 shadow-sm">
      <a href="/admin/v1/staff/dashboard" class="flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-500/10 text-blue-700 hover:bg-blue-500/20 transition-all duration-200 transform hover:scale-105">
        <i class="fa fa-home"></i> Dashboard
      </a>
      <i class="fa fa-chevron-right text-gray-400 text-sm"></i>
      <a href="/admin/v1/staff" class="flex items-center gap-2 px-4 py-2 rounded-lg bg-indigo-500/10 text-indigo-700 hover:bg-indigo-500/20 transition-all duration-200 transform hover:scale-105">
        <i class="fa fa-users"></i> Staff Management
      </a>
      <i class="fa fa-chevron-right text-gray-400 text-sm"></i>
      <span class="px-4 py-2 text-gray-600 font-medium">New Admin</span>
    </nav>

    <!-- Floating Card with Glass Effect -->
    <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl border border-white/20 overflow-hidden">
      <!-- Header Section with Gradient -->
      <div class="bg-gradient-to-r from-blue-600 to-indigo-600 p-8 text-white">
        <div class="flex items-center justify-between">
          <div>
            <h1 class="text-4xl font-bold mb-2">Create Admin Account</h1>
            <p class="text-blue-100 text-lg">Add a new administrator to your team</p>
          </div>
          <div class="hidden md:block">
            <div class="w-20 h-20 bg-white/20 rounded-full flex items-center justify-center">
              <i class="fa fa-user-plus text-3xl"></i>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Content Section -->
      <div class="p-8">


        <!-- Flash Messages with Animation -->
        <% if (error && error.length) { %>
          <div class="mb-8 p-6 rounded-xl bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 shadow-lg animate-pulse">
            <% error.forEach(msg => { %>
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center">
                  <i class="fa fa-exclamation-triangle text-red-600"></i>
                </div>
                <div>
                  <p class="font-semibold text-red-800">Error</p>
                  <p class="text-red-700"><%= msg %></p>
                </div>
              </div>
            <% }) %>
          </div>
        <% } %>
        <% if (success && success.length) { %>
          <div class="mb-8 p-6 rounded-xl bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 shadow-lg animate-pulse">
            <% success.forEach(msg => { %>
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                  <i class="fa fa-check-circle text-green-600"></i>
                </div>
                <div>
                  <p class="font-semibold text-green-800">Success</p>
                  <p class="text-green-700"><%= msg %></p>
                </div>
              </div>
            <% }) %>
          </div>
        <% } %>

        <form action="/admin/v1/staff/register" method="POST" enctype="multipart/form-data" class="space-y-8">
          <!-- Account Credentials Section -->
          <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-100">
            <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center gap-2">
              <i class="fa fa-user-circle text-blue-600"></i> Account Credentials
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Username -->
              <div class="group">
                <label for="username" class="block font-semibold mb-2 text-gray-700 flex items-center gap-2">
                  <i class="fa fa-user text-blue-500"></i> Username
                </label>
                <div class="relative">
                  <input
                    id="username"
                    name="username"
                    type="text"
                    placeholder="Enter username"
                    value="<%= typeof old !== 'undefined' ? old.username : '' %>"
                    class="w-full p-4 pl-12 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 bg-white/80 backdrop-blur-sm group-hover:shadow-md"
                    required
                  >
                  <i class="fa fa-user absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 group-focus-within:text-blue-500 transition-colors"></i>
                </div>
              </div>

              <!-- Full Name -->
              <div class="group">
                <label for="fullname" class="block font-semibold mb-2 text-gray-700 flex items-center gap-2">
                  <i class="fa fa-id-card text-blue-500"></i> Full Name
                </label>
                <div class="relative">
                  <input
                    id="fullname"
                    name="fullname"
                    type="text"
                    placeholder="Enter full name"
                    value="<%= typeof old !== 'undefined' ? old.fullname : '' %>"
                    class="w-full p-4 pl-12 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 bg-white/80 backdrop-blur-sm group-hover:shadow-md"
                    required
                  >
                  <i class="fa fa-id-card absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 group-focus-within:text-blue-500 transition-colors"></i>
                </div>
              </div>
            </div>
          </div>

          <!-- Contact Information Section -->
          <div class="bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl border border-green-100">
            <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center gap-2">
              <i class="fa fa-address-book text-green-600"></i> Contact Information
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Email -->
              <div class="group">
                <label for="email" class="block font-semibold mb-2 text-gray-700 flex items-center gap-2">
                  <i class="fa fa-envelope text-green-500"></i> Email Address
                </label>
                <div class="relative">
                  <input
                    id="email"
                    name="email"
                    type="email"
                    placeholder="admin@company.com"
                    value="<%= typeof old !== 'undefined' ? old.email : '' %>"
                    class="w-full p-4 pl-12 rounded-xl border-2 border-gray-200 focus:border-green-500 focus:ring-4 focus:ring-green-100 transition-all duration-200 bg-white/80 backdrop-blur-sm group-hover:shadow-md"
                    required
                  >
                  <i class="fa fa-envelope absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 group-focus-within:text-green-500 transition-colors"></i>
                </div>
              </div>

              <!-- Phone -->
              <div class="group">
                <label for="phone" class="block font-semibold mb-2 text-gray-700 flex items-center gap-2">
                  <i class="fa fa-phone text-green-500"></i> Phone Number
                </label>
                <div class="relative">
                  <input
                    id="phone"
                    name="phone"
                    type="tel"
                    placeholder="+1 (555) 123-4567"
                    value="<%= typeof old !== 'undefined' ? old.phone : '' %>"
                    class="w-full p-4 pl-12 rounded-xl border-2 border-gray-200 focus:border-green-500 focus:ring-4 focus:ring-green-100 transition-all duration-200 bg-white/80 backdrop-blur-sm group-hover:shadow-md"
                    required
                  >
                  <i class="fa fa-phone absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 group-focus-within:text-green-500 transition-colors"></i>
                </div>
              </div>
            </div>
          </div>

          <!-- Security Section -->
          <div class="bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-xl border border-purple-100">
            <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center gap-2">
              <i class="fa fa-shield-alt text-purple-600"></i> Security & Access
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Password -->
              <div class="group">
                <label for="password" class="block font-semibold mb-2 text-gray-700 flex items-center gap-2">
                  <i class="fa fa-lock text-purple-500"></i> Password
                </label>
                <div class="relative">
                  <input
                    id="password"
                    name="password"
                    type="password"
                    placeholder="Minimum 8 characters"
                    class="w-full p-4 pl-12 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:ring-4 focus:ring-purple-100 transition-all duration-200 bg-white/80 backdrop-blur-sm group-hover:shadow-md"
                    required
                    minlength="8"
                  >
                  <i class="fa fa-lock absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 group-focus-within:text-purple-500 transition-colors"></i>
                </div>
                <p class="text-sm text-gray-500 mt-1 flex items-center gap-1">
                  <i class="fa fa-info-circle"></i> Must be at least 8 characters long
                </p>
              </div>

              <!-- Role -->
              <div class="group">
                <label for="role" class="block font-semibold mb-2 text-gray-700 flex items-center gap-2">
                  <i class="fa fa-user-tag text-purple-500"></i> Role
                </label>
                <div class="relative">
                  <select 
                    id="role" 
                    name="role" 
                    class="w-full p-4 pl-12 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:ring-4 focus:ring-purple-100 transition-all duration-200 bg-white/80 backdrop-blur-sm group-hover:shadow-md appearance-none"
                    required
                  >
                    <option value="">Select Role</option>
                    <% ['admin', 'superadmin', 'developer'].forEach(r => { %>
                      <option 
                        value="<%= r %>"
                        <%= (typeof old !== 'undefined' && old.role === r) ? 'selected' : '' %>
                      ><%= r.charAt(0).toUpperCase() + r.slice(1) %></option>
                    <% }) %>
                  </select>
                  <i class="fa fa-user-tag absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 group-focus-within:text-purple-500 transition-colors"></i>
                  <i class="fa fa-chevron-down absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                </div>
              </div>
            </div>
          </div>

      <!-- Personal Details Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Gender -->
        <div>
          <label for="gender" class="block font-semibold mb-2 text-gray-700">Gender</label>
          <select 
            id="gender" 
            name="gender" 
            class="w-full p-3 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition"
            required
          >
            <option value="">Select Gender</option>
            <% ['male', 'female', 'other'].forEach(g => { %>
              <option 
                value="<%= g %>"
                <%= (typeof old !== 'undefined' && old.gender === g) ? 'selected' : '' %>
              ><%= g.charAt(0).toUpperCase() + g.slice(1) %></option>
            <% }) %>
          </select>
        </div>
      </div>

      <!-- Address -->
      <div>
        <label for="Address" class="block font-semibold mb-2 text-gray-700">Address</label>
        <input
          id="Address"
          name="Address"
          type="text"
          placeholder="Enter address"
          value="<%= typeof old !== 'undefined' ? old.Address : '' %>"
          class="w-full p-3 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition"
        >
      </div>

      <!-- Profile Photo -->
      <div>
        <label for="photo" class="block font-semibold mb-2 text-gray-700">Profile Photo</label>
        <input 
          id="photo" 
          name="photo" 
          type="file" 
          accept="image/*"
          class="w-full p-3 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
        >
        <p class="mt-1 text-sm text-gray-500">JPEG or PNG, max 2MB</p>
      </div>

      <!-- Submit Button -->
      <div class="flex justify-end gap-3">
        <a href="/admin/v1/staff" class="px-6 py-3 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 transition font-medium">
          Cancel
        </a>
        <button type="submit" class="px-6 py-3 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition flex items-center gap-2">
          <i class="fa fa-user-plus"></i> Register Admin
        </button>
      </div>
    </form>
  </div>
</main>

<style nonce="<%= (typeof cspNonce !== 'undefined' ? cspNonce : '') %>">
  @media (max-width: 768px) {
    .file\:mr-4 {
      margin-right: 1rem;
    }
    .file\:py-2 {
      padding-top: 0.5rem;
      padding-bottom: 0.5rem;
    }
    .file\:px-4 {
      padding-left: 1rem;
      padding-right: 1rem;
    }
  }
</style>

<%- include('../partials/footer.ejs') %>

