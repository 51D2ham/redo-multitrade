<%- include('../partials/auth-header.ejs', { title: 'Reset Password' }) %>

<div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200">
  <!-- Header -->
  <div class="bg-blue-600 p-6 text-center">
    <div class="flex justify-center mb-4">
      <div class="w-16 h-16 rounded-xl bg-white flex items-center justify-center">
        <i class="fa fa-key text-blue-600 text-2xl"></i>
      </div>
    </div>
    <h1 class="text-2xl font-bold text-white mb-1">Reset Password</h1>
    <p class="text-blue-100">Create a new secure password</p>
  </div>
  
  <div class="p-6">
    <!-- Flash Messages -->
    <% if (error && error.length) { %>
      <div class="mb-4 p-3 rounded-lg border-l-4 border-red-400 bg-red-50 text-red-700">
        <% error.forEach(msg => { %>
          <div class="flex items-center gap-2">
            <i class="fa fa-exclamation-circle"></i>
            <%= msg %>
          </div>
        <% }) %>
      </div>
    <% } %>
    <% if (success && success.length) { %>
      <div class="mb-4 p-3 rounded-lg border-l-4 border-green-400 bg-green-50 text-green-700">
        <% success.forEach(msg => { %>
          <div class="flex items-center gap-2">
            <i class="fa fa-check-circle"></i>
            <%= msg %>
          </div>
        <% }) %>
      </div>
    <% } %>

    <!-- Reset Form -->
    <form action="/admin/v1/staff/reset-password" method="POST" class="space-y-4">
      <!-- Email Field -->
      <div>
        <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fa fa-envelope text-gray-400"></i>
          </div>
          <input
            id="email"
            name="email"
            type="email"
            placeholder="admin@example.com"
            value="<%= typeof email !== 'undefined' ? email : '' %>"
            class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            required
            autocomplete="username"
          >
        </div>
      </div>

      <!-- OTP Field -->
      <div>
        <label for="otpCode" class="block text-sm font-medium text-gray-700 mb-1">Verification Code</label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fa fa-shield-alt text-gray-400"></i>
          </div>
          <input
            id="otpCode"
            name="otpCode"
            type="text"
            inputmode="numeric"
            pattern="[0-9]*"
            maxlength="6"
            placeholder="Enter 6-digit code"
            class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            required
            autocomplete="one-time-code"
          >
        </div>
      </div>

      <!-- New Password Field -->
      <div>
        <label for="newPassword" class="block text-sm font-medium text-gray-700 mb-1">New Password</label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fa fa-lock text-gray-400"></i>
          </div>
          <input
            id="newPassword"
            name="newPassword"
            type="password"
            placeholder="Create a strong password"
            class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            required
            autocomplete="new-password"
            minlength="8"
          >
        </div>
      </div>

      <!-- Submit Button -->
      <button type="submit" class="w-full py-3 px-4 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition flex items-center justify-center gap-2">
        <i class="fa fa-key"></i>
        Reset Password
      </button>

      <!-- Back to Login -->
      <div class="text-center pt-2">
        <a href="/admin/v1/staff/login" class="text-sm text-blue-600 hover:text-blue-800">
          Back to Login
        </a>
      </div>
    </form>
  </div>
  
  <!-- Footer -->
  <div class="bg-gray-50 px-6 py-3 border-t border-gray-200 text-center">
    <p class="text-gray-500 text-sm">© <%= new Date().getFullYear() %> Multitrade. All rights reserved.</p>
  </div>
</div>

<%- include('../partials/auth-footer.ejs') %>

